<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Light Spiral Galaxy</title>
  <style>
    html,body{height:100%;margin:0;background:#000;overflow:hidden}
    canvas{display:block;width:100vw;height:100vh}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
<script>
(() => {
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d');
  let DPR = Math.max(1, window.devicePixelRatio || 1);

  function resize(){
    DPR = Math.max(1, window.devicePixelRatio || 1);
    canvas.width = Math.floor(innerWidth * DPR);
    canvas.height = Math.floor(innerHeight * DPR);
    canvas.style.width = innerWidth+'px';
    canvas.style.height = innerHeight+'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener('resize', resize);
  resize();

  // parameters (lighter for performance)
  const params = {
    rotation: 0,
    spinSpeed: 0.0003,
    starCount: 800,
    coreRadius: Math.min(innerWidth, innerHeight) * 0.05
  };

  // stars
  let stars = [];
  function regenerate(){
    stars = [];
    const W = innerWidth, H = innerHeight;
    const R = Math.hypot(W/2, H/2);

    // spiral arms
    const arms = 3;
    for(let i=0;i<params.starCount;i++){
      const armAngle = (i % arms) / arms * Math.PI*2;
      const t = Math.random() * R * 0.8;
      const armOffset = (t / R) * 1.2 * Math.PI * 2;
      const theta = armAngle + armOffset + (Math.random()-0.5)*0.6;
      const spread = Math.random() * 40 * (1 - t/R);
      let x = Math.cos(theta) * t + (Math.random()-0.5) * spread;
      let y = Math.sin(theta) * t + (Math.random()-0.5) * spread * 0.6;

      // tilt for side view (rotate around X axis)
      const tilt = 0.5; // radians
      const z = y * Math.sin(tilt);
      y = y * Math.cos(tilt);
      
      const size = Math.max(0.3, (1 - t/R) * 2.2);
      const alpha = 0.5 + Math.random()*0.5;
      stars.push({x,y,z,size,alpha});
    }
  }

  regenerate();
  addEventListener('resize', ()=>{ params.coreRadius = Math.min(innerWidth, innerHeight) * 0.05; regenerate(); });

  let last = performance.now();
  function draw(now){
    const dt = now - last; last = now;
    const W = innerWidth, H = innerHeight;

    ctx.fillStyle = "#000";
    ctx.fillRect(0,0,W,H);

    params.rotation += params.spinSpeed * dt;

    ctx.save();
    ctx.translate(W/2, H/2);
    ctx.rotate(params.rotation);

    for(let s of stars){
      const depth = 1 + s.z * 0.002;
      ctx.beginPath();
      ctx.fillStyle = `rgba(${200+Math.random()*55},${200+Math.random()*55},255,${s.alpha})`;
      ctx.arc(s.x/depth, s.y/depth, s.size/depth, 0, Math.PI*2);
      ctx.fill();
    }

    // bright core
    const grd = ctx.createRadialGradient(0,0,0,0,0, params.coreRadius*2);
    grd.addColorStop(0,'rgba(255,255,240,1)');
    grd.addColorStop(0.3,'rgba(255,200,220,0.6)');
    grd.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.arc(0,0, params.coreRadius*2, 0, Math.PI*2);
    ctx.fill();

    ctx.restore();

    requestAnimationFrame(draw);
  }

  requestAnimationFrame(draw);
})();
</script>
</body>
</html>
