<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Galaxy Replica - Side View</title>
  <style>
    html,body{height:100%;margin:0;background:#000;overflow:hidden}
    canvas{display:block;width:100vw;height:100vh}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
<script>
(() => {
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d');
  let DPR = Math.max(1, window.devicePixelRatio || 1);

  function resize(){
    DPR = Math.max(1, window.devicePixelRatio || 1);
    canvas.width = Math.floor(innerWidth * DPR);
    canvas.height = Math.floor(innerHeight * DPR);
    canvas.style.width = innerWidth+'px';
    canvas.style.height = innerHeight+'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener('resize', resize);
  resize();

  // parameters
  const params = {
    rotation: 0,
    spinSpeed: 0.00025,
    starCount: 1200,
    coreRadius: Math.min(innerWidth, innerHeight) * 0.05,
    arms: 10
  };

  // stars
  let stars = [];
  function regenerate(){
    stars = [];
    const W = innerWidth, H = innerHeight;
    const R = Math.hypot(W/2, H/2);

    for(let i=0;i<params.starCount;i++){
      const armAngle = (i % params.arms) / params.arms * Math.PI*2;
      const t = Math.random() * R * 0.7;
      const armOffset = (t / R) * 1.6 * Math.PI * 2;
      const theta = armAngle + armOffset + (Math.random()-0.5)*0.4;
      const spread = Math.random() * 35 * (1 - t/R);
      let x = Math.cos(theta) * t + (Math.random()-0.5) * spread;
      let y = Math.sin(theta) * t + (Math.random()-0.5) * spread * 0.5;

      // tilt to simulate Andromeda-like angle
      const tiltX = 0.7; // around X axis
      const tiltY = 0.3; // skew for perspective
      const z = y * Math.sin(tiltX);
      y = y * Math.cos(tiltX) - x * Math.sin(tiltY);
      x = x * Math.cos(tiltY);

      const size = Math.max(0.3, (1 - t/R) * 2.0);
      const alpha = 0.4 + Math.random()*0.6;
      stars.push({x,y,z,size,alpha});
    }
  }

  regenerate();
  addEventListener('resize', ()=>{ params.coreRadius = Math.min(innerWidth, innerHeight) * 0.05; regenerate(); });

  let last = performance.now();
  function draw(now){
    const dt = now - last; last = now;
    const W = innerWidth, H = innerHeight;

    ctx.fillStyle = "#000";
    ctx.fillRect(0,0,W,H);

    params.rotation += params.spinSpeed * dt;

    ctx.save();
    ctx.translate(W/2, H/2);
    ctx.rotate(params.rotation);

    for(let s of stars){
      const depth = 1 + s.z * 0.0015;
      ctx.beginPath();
      ctx.fillStyle = `rgba(${180+Math.random()*75},${180+Math.random()*75},255,${s.alpha})`;
      ctx.arc(s.x/depth, s.y/depth, s.size/depth, 0, Math.PI*2);
      ctx.fill();
    }

    // bright elliptical core
    const grd = ctx.createRadialGradient(0,0,0,0,0, params.coreRadius*3);
    grd.addColorStop(0,'rgba(255,255,230,1)');
    grd.addColorStop(0.3,'rgba(255,200,220,0.7)');
    grd.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.ellipse(0,0, params.coreRadius*4, params.coreRadius*1.6, 0, 0, Math.PI*2);
    ctx.fill();

    ctx.restore();

    requestAnimationFrame(draw);
  }

  requestAnimationFrame(draw);
})();
</script>
</body>
</html>
